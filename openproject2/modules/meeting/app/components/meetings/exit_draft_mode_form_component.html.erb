<%=
  component_wrapper do
    primer_form_with(
      model: @meeting,
      method: :post,
      url:,
      data: {
        controller: "show-when-checked"
      },
      html: {
        id: "exit-draft-mode-form"
      }
    ) do |f|
      flex_layout do |body|
        body.with_row do
          render(OpPrimer::InsetBoxComponent.new(mt: 3)) do
            flex_layout do |box|
              box.with_row do
                render(Meeting::SendEmailUpdates.new(f, meeting: @meeting))
              end
            end
          end
        end
        body.with_row(
          mt: 3,
          data: {
            "target-name": "notification-banner",
            "show-when-checked-target": "effect",
            "show-when": "checked",
            visibility_class: "d-none"
          }
        ) do
          render(Meetings::EmailUpdatesBannerComponent.new(@meeting, override: :enabled))
        end
        body.with_row(
          mt: 3,
          classes: "d-none",
          data: {
            "target-name": "notification-banner",
            "show-when-checked-target": "effect",
            "show-when": "unchecked",
            visibility_class: "d-none"
          }
        ) do
          render(Meetings::EmailUpdatesBannerComponent.new(@meeting, override: :disabled))
        end
      end
    end
  end
%>
