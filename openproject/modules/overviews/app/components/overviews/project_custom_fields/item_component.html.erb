<%=
  flex_layout(
    align_items: :flex_start,
    justify_content: :space_between,
    classes: "op-project-custom-field-container",
    data: {
      test_selector: "project-custom-field-#{@project_custom_field.id}"
    }
  ) do |custom_field_value_container|
    # temporarily using inline styles in order to align the content as desired
    custom_field_value_container.with_row(mb: 1) do
      render OpenProject::Common::AttributeLabelComponent.new(
        attribute: @project_custom_field.attribute_name,
        model: @project,
        required: required?
      ) do
        render(Primer::Beta::Text.new(font_weight: :bold)) { @project_custom_field.name }
      end
    end

    custom_field_value_container.with_row(w: :full) do
      render(authorized_edit_wrapper) do
        if not_set?
          render(Primer::Beta::Text.new) { t("placeholders.default") }
        else
          render_value
        end
      end
    end

    custom_field_value_container.with_row(w: :full) do
      render OpenProject::Common::AttributeHelpTextCaptionComponent.new(
        help_text: helpers.help_text_for(
          @project,
          @project_custom_field.attribute_name,
          current_user: helpers.current_user
        )
      )
    end

    if calculation_error?
      custom_field_value_container.with_row(w: :full) do
        render_calculation_error
      end
    end
  end
%>

<%= render_calculated_value_tooltip if calculated_value? %>
