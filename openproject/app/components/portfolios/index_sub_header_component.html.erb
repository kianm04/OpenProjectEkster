<%=
  component_wrapper(tag: "turbo-frame") do
    render(Primer::OpenProject::SubHeader.new(data: sub_header_data_attributes)) do |subheader|
      subheader.with_filter_input(
        name: "name_and_identifier",
        label: t("portfolios.index.search.label"),
        value: filter_input_value,
        placeholder: t("portfolios.index.search.placeholder"),
        leading_visual: {
          icon: :search,
          size: :small
        },
        clear_button_id: clear_button_id,
        data: filter_input_data_attributes
      )

      subheader.with_filter_component do
        render(Projects::ProjectFilterButtonComponent.new(query: @query, disabled: @disable_buttons))
      end

      if show_new_portfolio_button?
        subheader.with_action_button(
          tag: :a,
          href: new_portfolio_path,
          scheme: :primary,
          leading_icon: :plus,
          label: t(:label_portfolio),
          disabled: @disable_buttons,
          size: :medium,
          data: { "test-selector": "portfolio-new-button" }
        ) do
          t(:label_portfolio)
        end
      end

      subheader.with_bottom_pane_component do
        render(
          Projects::ProjectsFiltersComponent.new(
            query: @query,
            # Using the project's filters is currently sufficient. There isn't a portfolio-specific
            # filter yet.
            lazy_loaded_path: :projects_filters_path,
            initially_expanded: filters_expanded?
          )
        )
      end
    end
  end
%>
