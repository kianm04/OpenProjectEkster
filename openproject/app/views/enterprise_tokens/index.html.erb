<% html_title t(:label_administration), t(:label_enterprise_edition) %>

<%=
  render(Primer::OpenProject::PageHeader.new) do |header|
    header.with_title { t(:label_enterprise_edition) }
    header.with_breadcrumbs(
      [{ href: admin_index_path, text: t(:label_administration) },
       t(:label_enterprise_edition)]
    )

    if EnterpriseToken.all_tokens.any?
      button_title = t("admin.enterprise.create_dialog.title")
      header.with_action_button(
        tag: :a,
        scheme: :primary,
        mobile_label: button_title,
        mobile_icon: :plus,
        size: :medium,
        href: new_enterprise_token_path,
        aria: { label: button_title },
        role: "button",
        data: {
          turbo_stream: true
        },
        title: button_title
      ) do |button|
        button.with_leading_visual_icon(icon: :plus)
        button_title
      end
    end
  end
%>

<%= error_messages_for "token" if @token %>

<% if EnterpriseToken.all_tokens.any? %>
  <%= render Admin::EnterpriseTokens::TableComponent.new(rows: EnterpriseToken.all_tokens) %>
<% else %>
  <%= render partial: "info" %>
<% end %>
